import{S as F,i as G,s as O,k as w,q as $,a as y,l as E,m as M,r as C,h as u,c as D,n as _,b as H,H as k,J as U,C as I,K as V,o as J,L as K,M as A,u as S,N,O as L}from"../../chunks/index-aa253341.js";const{window:Y}=K;function T(n,e,i){const t=n.slice();return t[5]=e[i],t}function Z(n){let e,i;return{c(){e=w("img"),this.h()},l(t){e=E(t,"IMG",{width:!0,src:!0,alt:!0}),this.h()},h(){_(e,"width","300"),L(e.src,i="https://placehold.co/300x300")||_(e,"src",i),_(e,"alt","example")},m(t,s){H(t,e,s)},p:I,d(t){t&&u(e)}}}function z(n){let e,i;return{c(){e=w("img"),this.h()},l(t){e=E(t,"IMG",{width:!0,src:!0,alt:!0}),this.h()},h(){_(e,"width","300"),L(e.src,i=n[8])||_(e,"src",i),_(e,"alt","example")},m(t,s){H(t,e,s)},p(t,s){s&1&&!L(e.src,i=t[8])&&_(e,"src",i)},d(t){t&&u(e)}}}function B(n){let e,i;return{c(){e=w("p"),i=$("loading...")},l(t){e=E(t,"P",{});var s=M(e);i=C(s,"loading..."),s.forEach(u)},m(t,s){H(t,e,s),k(e,i)},p:I,d(t){t&&u(e)}}}function x(n){let e,i,t,s=n[5].id+"",d,p,f,g,v,h,o,l=n[5].likesRecent+"",r,a,c={ctx:n,current:null,token:null,hasCatch:!0,pending:B,then:z,catch:Z,value:8,error:9};return A(g=P(n[5].id,n[5].siblings),c),{c(){e=w("div"),i=w("h3"),t=w("a"),d=$(s),f=y(),c.block.c(),v=y(),h=w("p"),o=$("Likes: "),r=$(l),a=y(),this.h()},l(b){e=E(b,"DIV",{class:!0});var m=M(e);i=E(m,"H3",{});var R=M(i);t=E(R,"A",{href:!0,target:!0,rel:!0});var q=M(t);d=C(q,s),q.forEach(u),R.forEach(u),f=D(m),c.block.l(m),v=D(m),h=E(m,"P",{});var j=M(h);o=C(j,"Likes: "),r=C(j,l),j.forEach(u),a=D(m),m.forEach(u),this.h()},h(){_(t,"href",p="https://huggingface.co/"+n[5].id),_(t,"target","_blank"),_(t,"rel","noreferrer"),_(e,"class","grid-item svelte-1lg2bo6")},m(b,m){H(b,e,m),k(e,i),k(i,t),k(t,d),k(e,f),c.block.m(e,c.anchor=null),c.mount=()=>e,c.anchor=v,k(e,v),k(e,h),k(h,o),k(h,r),k(e,a)},p(b,m){n=b,m&1&&s!==(s=n[5].id+"")&&S(d,s),m&1&&p!==(p="https://huggingface.co/"+n[5].id)&&_(t,"href",p),c.ctx=n,m&1&&g!==(g=P(n[5].id,n[5].siblings))&&A(g,c)||N(c,n,m),m&1&&l!==(l=n[5].likesRecent+"")&&S(r,l)},d(b){b&&u(e),c.block.d(),c.token=null,c=null}}}function Q(n){let e,i,t,s,d,p,f,g,v,h=n[0],o=[];for(let l=0;l<h.length;l+=1)o[l]=x(T(n,h,l));return{c(){e=w("h2"),i=$("Most liked models last month ðŸ¤—"),t=y(),s=w("p"),d=$("Diffusers models most liked on Hugging Face last month"),p=y(),f=w("div");for(let l=0;l<o.length;l+=1)o[l].c();this.h()},l(l){e=E(l,"H2",{});var r=M(e);i=C(r,"Most liked models last month ðŸ¤—"),r.forEach(u),t=D(l),s=E(l,"P",{});var a=M(s);d=C(a,"Diffusers models most liked on Hugging Face last month"),a.forEach(u),p=D(l),f=E(l,"DIV",{class:!0});var c=M(f);for(let b=0;b<o.length;b+=1)o[b].l(c);c.forEach(u),this.h()},h(){_(f,"class","grid svelte-1lg2bo6")},m(l,r){H(l,e,r),k(e,i),H(l,t,r),H(l,s,r),k(s,d),H(l,p,r),H(l,f,r);for(let a=0;a<o.length;a+=1)o[a].m(f,null);g||(v=U(Y,"scroll",n[1]),g=!0)},p(l,[r]){if(r&1){h=l[0];let a;for(a=0;a<h.length;a+=1){const c=T(l,h,a);o[a]?o[a].p(c,r):(o[a]=x(c),o[a].c(),o[a].m(f,null))}for(;a<o.length;a+=1)o[a].d(1);o.length=h.length}},i:I,o:I,d(l){l&&u(e),l&&u(t),l&&u(s),l&&u(p),l&&u(f),V(o,l),g=!1,v()}}}async function P(n,e){let i=e.find(s=>{let d=s.rfilename.split(".").pop().toLowerCase();return["jpg","jpeg","png","webp"].includes(d)});const t="https://huggingface.co/"+n;if(i)return`${t}/resolve/main/${i.rfilename}`;{const s=/\b(https?):\/\/[-A-Z0-9+&@#/%?=~_|!:,.;]*\.(?:jpe?g|png|gif|bmp|webp)\b/gi,f=(await(await fetch(`${t}/resolve/main/README.md`)).text()).match(s);return f?f[0]:"https://placehold.co/300x300"}}function W(n,e,i){let t=[],s=null,d=!1;J(async()=>{await p(),await P()});async function p(){if(d)return;d=!0;let g="https://huggingface.co/api/models?filter=diffusers&sort=likesRecent&direction=-1&full=1&limit=24";s&&(g+=`&cursor=${s}`);const v=await fetch(g),h=v.headers.get("link");h&&h.split(",").forEach(l=>{const r=l.match(/<(.+)>;\srel="next"/);r&&(s=r[1].split("&cursor=")[1])}),i(0,t=[...t,...await v.json()]),d=!1}function f(){const g=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,v=document.body.scrollHeight,h=document.documentElement.clientHeight||window.innerHeight;g+h>=v-1&&p()}return[t,f]}class ee extends F{constructor(e){super(),G(this,e,W,Q,O,{})}}export{ee as default};
